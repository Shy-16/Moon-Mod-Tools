<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-classes_Application.html">classes/Application</a><ul class='methods'><li data-type='method'><a href="module-classes_Application.html#.importJSON">importJSON</a></li><li data-type='method'><a href="module-classes_Application.html#.loadOptions">loadOptions</a></li><li data-type='method'><a href="module-classes_Application.html#.log">log</a></li><li data-type='method'><a href="module-classes_Application.html#.logDebug">logDebug</a></li><li data-type='method'><a href="module-classes_Application.html#.logError">logError</a></li><li data-type='method'><a href="module-classes_Application.html#.logInfo">logInfo</a></li><li data-type='method'><a href="module-classes_Application.html#.logWarn">logWarn</a></li><li data-type='method'><a href="module-classes_Application.html#.safeImport">safeImport</a></li><li data-type='method'><a href="module-classes_Application.html#.toModulePath">toModulePath</a></li></ul></li><li><a href="module-classes_Bot.html">classes/Bot</a><ul class='methods'><li data-type='method'><a href="module-classes_Bot.html#._fetchInteractions">_fetchInteractions</a></li><li data-type='method'><a href="module-classes_Bot.html#._onInteractionCreate">_onInteractionCreate</a></li><li data-type='method'><a href="module-classes_Bot.html#._onReady">_onReady</a></li><li data-type='method'><a href="module-classes_Bot.html#._onShutdown">_onShutdown</a></li><li data-type='method'><a href="module-classes_Bot.html#._sendInteractions">_sendInteractions</a></li><li data-type='method'><a href="module-classes_Bot.html#.compareInteractionDefinitions">compareInteractionDefinitions</a></li><li data-type='method'><a href="module-classes_Bot.html#.loadConfigFile">loadConfigFile</a></li><li data-type='method'><a href="module-classes_Bot.html#.registerApplicationCommand">registerApplicationCommand</a></li><li data-type='method'><a href="module-classes_Bot.html#.registerEventHandler">registerEventHandler</a></li><li data-type='method'><a href="module-classes_Bot.html#.registerEventHandlerFile">registerEventHandlerFile</a></li><li data-type='method'><a href="module-classes_Bot.html#.start">start</a></li></ul></li><li><a href="module-classes_BotModule.html">classes/BotModule</a><ul class='methods'><li data-type='method'><a href="module-classes_BotModule.html#load">load</a></li></ul></li><li><a href="module-classes_Database.html">classes/Database</a></li></ul><h3>Modules</h3><ul><li><a href="module-classes_Application.html">classes/Application</a><ul class='methods'><li data-type='method'><a href="module-classes_Application.html#.importJSON">importJSON</a></li><li data-type='method'><a href="module-classes_Application.html#.loadOptions">loadOptions</a></li><li data-type='method'><a href="module-classes_Application.html#.log">log</a></li><li data-type='method'><a href="module-classes_Application.html#.logDebug">logDebug</a></li><li data-type='method'><a href="module-classes_Application.html#.logError">logError</a></li><li data-type='method'><a href="module-classes_Application.html#.logInfo">logInfo</a></li><li data-type='method'><a href="module-classes_Application.html#.logWarn">logWarn</a></li><li data-type='method'><a href="module-classes_Application.html#.safeImport">safeImport</a></li><li data-type='method'><a href="module-classes_Application.html#.toModulePath">toModulePath</a></li></ul></li><li><a href="module-classes_Bot.html">classes/Bot</a><ul class='methods'><li data-type='method'><a href="module-classes_Bot.html#._fetchInteractions">_fetchInteractions</a></li><li data-type='method'><a href="module-classes_Bot.html#._onInteractionCreate">_onInteractionCreate</a></li><li data-type='method'><a href="module-classes_Bot.html#._onReady">_onReady</a></li><li data-type='method'><a href="module-classes_Bot.html#._onShutdown">_onShutdown</a></li><li data-type='method'><a href="module-classes_Bot.html#._sendInteractions">_sendInteractions</a></li><li data-type='method'><a href="module-classes_Bot.html#.compareInteractionDefinitions">compareInteractionDefinitions</a></li><li data-type='method'><a href="module-classes_Bot.html#.loadConfigFile">loadConfigFile</a></li><li data-type='method'><a href="module-classes_Bot.html#.registerApplicationCommand">registerApplicationCommand</a></li><li data-type='method'><a href="module-classes_Bot.html#.registerEventHandler">registerEventHandler</a></li><li data-type='method'><a href="module-classes_Bot.html#.registerEventHandlerFile">registerEventHandlerFile</a></li><li data-type='method'><a href="module-classes_Bot.html#.start">start</a></li></ul></li><li><a href="module-classes_BotModule.html">classes/BotModule</a><ul class='methods'><li data-type='method'><a href="module-classes_BotModule.html#load">load</a></li></ul></li><li><a href="module-classes_Database.html">classes/Database</a></li><li><a href="module-events_reload.html">events/reload</a></li><li><a href="module-events_shutdown.html">events/shutdown</a></li><li><a href="module-modules_logger.html">modules/logger</a><ul class='methods'><li data-type='method'><a href="module-modules_logger.html#.onReady">onReady</a></li><li data-type='method'><a href="module-modules_logger.html#.onStart">onStart</a></li></ul></li><li><a href="module-modules_logger_log.html">modules/logger/log</a><ul class='methods'><li data-type='method'><a href="module-modules_logger_log.html#.messageDelete">messageDelete</a></li><li data-type='method'><a href="module-modules_logger_log.html#.messageUpdate">messageUpdate</a></li><li data-type='method'><a href="module-modules_logger_log.html#.raw">raw</a></li></ul></li><li><a href="module-modules_logger_messageTemplates.html">modules/logger/messageTemplates</a><ul class='methods'><li data-type='method'><a href="module-modules_logger_messageTemplates.html#.attachmentToEmbed">attachmentToEmbed</a></li></ul></li><li><a href="module-modules_modmail.html">modules/modmail</a><ul class='methods'><li data-type='method'><a href="module-modules_modmail.html#.onReady">onReady</a></li><li data-type='method'><a href="module-modules_modmail.html#.onStart">onStart</a></li></ul></li><li><a href="module-modules_modmail_event.html">modules/modmail/event</a><ul class='methods'><li data-type='method'><a href="module-modules_modmail_event.html#.messageCreate">messageCreate</a></li><li data-type='method'><a href="module-modules_modmail_event.html#~modMailMessage">modMailMessage</a></li></ul></li><li><a href="module-modules_modmail_messageTemplates.html">modules/modmail/messageTemplates</a><ul class='methods'><li data-type='method'><a href="module-modules_modmail_messageTemplates.html#.attachmentToEmbed">attachmentToEmbed</a></li><li data-type='method'><a href="module-modules_modmail_messageTemplates.html#.closeConfirmation">closeConfirmation</a></li><li data-type='method'><a href="module-modules_modmail_messageTemplates.html#.messageReceived">messageReceived</a></li><li data-type='method'><a href="module-modules_modmail_messageTemplates.html#.newResponse">newResponse</a></li><li data-type='method'><a href="module-modules_modmail_messageTemplates.html#.newTicket">newTicket</a></li><li data-type='method'><a href="module-modules_modmail_messageTemplates.html#.ticketConfirmation">ticketConfirmation</a></li></ul></li><li><a href="module-modules_modmail_reportMessage.html">modules/modmail/reportMessage</a><ul class='methods'><li data-type='method'><a href="module-modules_modmail_reportMessage.html#.handler">handler</a></li></ul></li><li><a href="module-modules_modmail_ticket.html">modules/modmail/ticket</a><ul class='methods'><li data-type='method'><a href="module-modules_modmail_ticket.html#.closeThread">closeThread</a></li><li data-type='method'><a href="module-modules_modmail_ticket.html#.getOrCreateThread">getOrCreateThread</a></li></ul></li><li><a href="module-modules_pitbot.html">modules/pitbot</a><ul class='methods'><li data-type='method'><a href="module-modules_pitbot.html#.onReady">onReady</a></li><li data-type='method'><a href="module-modules_pitbot.html#.onStart">onStart</a></li></ul></li><li><a href="module-modules_pitbot_messageTemplates.html">modules/pitbot/messageTemplates</a><ul class='methods'><li data-type='method'><a href="module-modules_pitbot_messageTemplates.html#.bulletHell">bulletHell</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#addTimeout">addTimeout</a></li><li><a href="global.html#handleBulletHell">handleBulletHell</a></li><li><a href="global.html#messageCreate">messageCreate</a></li><li><a href="global.html#updateRole">updateRole</a></li></ul>
    
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><h1>Moon Mod Tools</h1>
<p>Code base for all of the bots that provide moderator tools in moonmoon's subscriber Discord.</p>
<h2>Installation</h2>
<ol>
<li>Checkout this repository onto your server.</li>
<li>Obtain or create a <a href="#configuration-file">configuration file</a> with the bot's ID and token, among other settings described below.</li>
<li>Run <code>npm install</code> to install all of the dependencies.</li>
</ol>
<h2>Running the Bot</h2>
<p>Start the bot with <code>node .</code> to use default options.</p>
<ul>
<li>If your configuration file is not <code>config.json</code> in the app directory, you can instead run <code>node . --config &lt;filename&gt;</code> to load your configuration file.
To use PM2, you instead run <code>pm2 start --name=&quot;&lt;bot name&gt;&quot; &quot;node .&quot;</code> or <code>pm2 start --name=&quot;&lt;bot name&gt;&quot; node -- .</code></li>
<li>You can either enclose the node command and arguments in quotes, or add all node arguments after <code>node --</code>, as above.</li>
<li>Including a bot name is strongly recommended, otherwise PM2 will simply list the bot as &quot;node&quot; which may be confusing, especially in the log files.</li>
</ul>
<h2>Configuration File</h2>
<p>Example configuration file:</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;id&quot;: &quot;1234567890&quot;,
  &quot;token&quot;: &quot;abc123-abc123-abc123-abc123&quot;,
  &quot;intents&quot;: [&quot;Guilds&quot;],
  &quot;partials&quot;: [&quot;Channel&quot;],
  &quot;applicationCommands&quot;: [
    {
      &quot;filename&quot;: &quot;events/shutdown.mjs&quot;,
      &quot;guildIds&quot;: [],
      &quot;owner&quot;: true
    }
  ],
  &quot;modules&quot;: [
    {
      &quot;name&quot;: &quot;logger&quot;,
      &quot;options&quot;: {
        &quot;logChannelId&quot;: &quot;1272732359665647688&quot;
      }
    }
  ],
  &quot;ownerId&quot;: &quot;12345678901234567890&quot;
}
</code></pre>
<ul>
<li><strong>id / token</strong> - <em>(Both required)</em> These come from the <a href="https://discord.com/developers/applications">Discord developer portal</a> for your bot. <strong>id</strong> is the Application ID from the General Information page. <strong>token</strong> comes from the Bot page (but can only be viewed once, so don't miss it).</li>
<li><strong>intents</strong> - Array of strings, each being a member of <a href="https://discord-api-types.dev/api/discord-api-types-v10/enum/GatewayIntentBits">GatewayIntentBits</a>.</li>
<li><strong>partials</strong> - Array of strings, each being a member of <a href="https://discordjs.guide/popular-topics/partials.html#enabling-partials">Partials</a>.</li>
<li><strong>applicationCommands</strong> - Array of objects, each a definition of an application command. Application command definitions have the following properties:
<ul>
<li><strong>filename</strong> - File that contains the <a href="#application-command-file">properties of the application command</a>.</li>
<li><strong>guildIds</strong> - Array of guild IDs where this command will be available. Do not include this property for global commands.</li>
<li><strong>owner</strong> - True or false, whether this command can only be used by the bot owner.</li>
</ul>
</li>
<li><strong>modules</strong> - Array of module definitions to specify which installed modules should be loaded for this bot. Module definitions have the following properties:
<ul>
<li><strong>name</strong> - Name of the module, which matches the folder containing the module's code.</li>
<li><strong>options</strong> - An object with module-specific configuration options. Different modules will want different properties here.</li>
</ul>
</li>
<li><strong>ownerId</strong> - Discord ID of the user who owns the bot. This user will have access to all bot features, and that access cannot be removed.</li>
</ul>
<h2>Application Command File</h2>
<p>Example application command file:</p>
<pre class="prettyprint source lang-javascript"><code>/**
 * The function to run when the associated application command is used.
 * @param {CommandInteraction} interaction - The interaction object created by
 * Discord.js for this application command.
 */
export function handler(interaction) {
  interaction.reply({content:`I see you.`, ephemeral:true});
};

/**
 * The definition for the application command, which will be sent to the Discord
 * API.
 * @type {Object.&lt;string, *>}
 */
export const definition = {
  &quot;name&quot;: &quot;test&quot;,
  &quot;description&quot;: &quot;Doesn't do much.&quot;,
};
</code></pre>
<p>Application command files must export two values:</p>
<ul>
<li>A Function as <code>handler</code>, which is the function to run when <a href="https://discord.js.org/docs/packages/discord.js/main/Client:Class#interactionCreate">the command is used</a>. The interaction object documentation can be found at one of the following, depending on the type of interaction:
<ul>
<li><a href="https://discord.js.org/docs/packages/discord.js/main/ChatInputCommandInteraction:Class">Slash command</a></li>
<li><a href="https://discord.js.org/docs/packages/discord.js/main/MessageContextMenuCommandInteraction:Class">Message context menu</a></li>
<li><a href="https://discord.js.org/docs/packages/discord.js/main/UserContextMenuCommandInteraction:Class">User context menu</a></li>
</ul>
</li>
<li>An Object as <code>definition</code>, which is the application command definition. Documentation for this definition can be found at the following links:
<ul>
<li><a href="https://discord.com/developers/docs/interactions/application-commands#create-global-application-command-json-params">Global commands</a></li>
<li><a href="https://discord.com/developers/docs/interactions/application-commands#create-guild-application-command-json-params">Guild-specific commands</a>.</li>
</ul>
</li>
</ul>
<h2>Modules</h2>
<p>A module is a set of features with a common purpose. Each module should be contained within its own directory inside of the <code>modules/</code> directory. Inside of the module's directory, a file named <code>index.mjs</code> must be present, which will be imported when the module is loaded. An example module index file:</p>
<pre class="prettyprint source lang-javascript"><code>/**
 * Array of strings, specifying the intents that this module requires. See the
 * intents description in the configuration file section for more info.
 */
export const intents = [];

/**
 * Array of strings, specifying the partials that this module requires. See the
 * partials description in the configuration file section for more info.
 */
export const partials = [];

/**
 * Function that is called during bot startup, before the bot has logged in.
 * Use it to assign event listeners or other definitions that do not require an
 * active connection to Discord. This function can be async, in which case the
 * bot startup will await it.
 * @this Bot
 * @param {Object} module - The stored data of the loaded module.
 */
export function onStart(module) {
  // Code.
};

/**
 * Function that is called after the bot is logged in and ready. This function
 * can be async, in which case the bot startup will await it.
 * @this Bot
 * @param {Object} module - The stored data of the loaded module.
 */
export function onReady(module) {
  // Code.
};
</code></pre>
<p>Modules included with this bot are below:</p>
<h3>logger</h3>
<p>Logs the updating or deleting of messages on a server. Retains any attachments that are deleted with the message as well.
Options:</p>
<ul>
<li><strong>logChannelId</strong> - The snowflake ID of the channel where messages are to be logged.</li>
</ul>
<h3>modmail</h3>
<p>Allows users to send reports to the moderation team as a whole, and allows the moderation team to discuss their reports and anonymously interact with the user.
Options:</p>
<ul>
<li><strong>mailChannelId</strong> - The snowflake ID of the channel where modmail report threads will be created for mods to discuss the report. Must be a forum channel.</li>
<li><strong>databaseFile</strong> - Filename of the SQLite database file within the <code>storage/</code> directory that stores users and their modmail tickets, to make looking them up easier. Default: <code>modmail.sqlite</code></li>
</ul>
<h3>pitbot</h3>
<p>Manages the role that marks users as suspended, and logs disciplinary actions to allow moderators to better manage punishments against users who break the server rules.
Options:</p>
<ul>
<li><strong>logChannelId</strong> - The snowflake ID of the channel where pitbot will report all disciplinary actions that it takes.</li>
<li><strong>pitRoleId</strong> - The snowflake ID of the role to give to users who are currently suspended.</li>
<li><strong>modRoleId</strong> - A string or array of strings. Each string is a snowflake ID of a moderator role, so the bot knows who the moderators are.</li>
<li><strong>databaseFile</strong> - Filename of the SQLite database file within the <code>storage/</code> directory that stores all current and past disciplinary actions. Default: <code>pitbot.sqlite</code></li>
</ul>
<h2>Documentation</h2>
<p>The documentation in the <code>docs</code> directory is generated with <a href="https://jsdoc.app">JSDoc</a> with the following configuration file:</p>
<pre class="prettyprint source lang-javascript"><code>'use strict';

// BigInt JSON serialization.
BigInt.prototype.toJSON = function() {
  return this.toString() + 'n';
}

module.exports = {
  &quot;plugins&quot;: [&quot;plugins/markdown&quot;],
  &quot;opts&quot;: {
    &quot;template&quot;: &quot;docs/template&quot;,
    &quot;destination&quot;: &quot;docs&quot;,
    &quot;recurse&quot;: true,
    &quot;readme&quot;: &quot;README.md&quot;,
    &quot;package&quot;: &quot;package.json&quot;,
  },
  &quot;source&quot;: {
    &quot;includePattern&quot;: &quot;\\.m?js$&quot;,
    &quot;exclude&quot;: [&quot;docs&quot;, &quot;node_modules&quot;, &quot;.git&quot;],
  },
  &quot;templates&quot;: {
    &quot;default&quot;: {
      &quot;outputSourceFiles&quot;: false,
    },
  },
};
</code></pre>
<p>If you add code to the bot and want your changes to be documented in the same manner, use this information to do so.</p></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Tue Sep 03 2024 17:57:49 GMT-0500 (Central Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>